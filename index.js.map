{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46051041-cf19ab3ef74349fd60d832ede';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: 15\n            }\n        });\n\n        return { images: response.data.hits, totalHits: response.data.totalHits }; // Повертаємо зображення та загальну кількість\n\n    } catch (error) {\n        throw new Error('Не вдалося отримати зображення');\n    }\n}\n","export function renderImages(images, container) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p><strong>Likes:</strong> ${likes}</p>\n                <p><strong>Views:</strong> ${views}</p>\n                <p><strong>Comments:</strong> ${comments}</p>\n                <p><strong>Downloads:</strong> ${downloads}</p>\n            </div>\n        </div>\n    `).join('');\n\n    container.innerHTML += markup; // Додаємо нові зображення до контейнера\n}\n\n// Функція для очищення контейнера\nexport function clearGallery(container) {\n    container.innerHTML = ''; // Очищаємо галерею\n}\n\n// Показуємо індикатор завантаження\nexport function showLoader() {\n    document.getElementById('loader').style.display = 'flex'; // Припускаємо, що loader має стилі display: none\n}\n\n// Приховуємо індикатор завантаження\nexport function hideLoader() {\n    document.getElementById('loader').style.display = 'none';\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, showLoader, hideLoader } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'loaders.css/loaders.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst galleryContainer = document.querySelector('#gallery');\nconst loadMoreBtn = document.querySelector('#load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst lightbox = new SimpleLightbox('.gallery a');\n\n// Обробка події сабміту форми\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    const query = event.target.elements.query.value.trim();\n\n    if (!query) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Search field cannot be empty!',\n        });\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1; // Скидаємо на початкову сторінку\n    clearGallery(galleryContainer); // Очищуємо попередні результати\n    loadMoreBtn.style.display = 'none'; // Ховаємо кнопку \"Load more\"\n\n    showLoader();\n\n    try {\n        const { images, totalHits } = await fetchImages(currentQuery, currentPage);\n        \n        if (images.length === 0) {\n            iziToast.warning({\n                title: 'No results',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            hideLoader();\n            return;\n        }\n\n        renderImages(images, galleryContainer);\n        lightbox.refresh();\n        \n        loadMoreBtn.style.display = 'block'; // Показуємо кнопку \"Load more\"\n        \n        // Перевіряємо, чи досягли кінця колекції\n        const totalPages = Math.ceil(totalHits / 15); // Обчислюємо загальну кількість сторінок\n        if (currentPage >= totalPages) {\n            loadMoreBtn.style.display = 'none'; // Сховати кнопку \"Load more\"\n            const endMessage = document.createElement('p');\n            endMessage.textContent = \"We're sorry, but you've reached the end of search results.\";\n            endMessage.classList.add('end-message'); \n            endMessage.style.textAlign = 'center'; // Вирівнюємо текст по центру\n            galleryContainer.appendChild(endMessage); // Додаємо повідомлення до галереї\n            \n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong while fetching images.',\n        });\n        console.error('Error:', error);\n    } finally {\n        hideLoader();\n    }\n});\n\n// Обробка події кліку на кнопку \"Load more\"\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1; // Збільшуємо номер сторінки\n\n    showLoader();\n\n    try {\n        const { images, totalHits } = await fetchImages(currentQuery, currentPage);\n        renderImages(images, galleryContainer);\n        lightbox.refresh();\n\n        // Перевіряємо, чи досягли кінця колекції\n        const totalPages = Math.ceil(totalHits / 15); // Обчислюємо загальну кількість сторінок\n        if (currentPage >= totalPages) {\n            loadMoreBtn.style.display = 'none'; // Сховати кнопку \"Load more\"\n            const endMessage = document.createElement('p');\n            endMessage.textContent = \"We're sorry, but you've reached the end of search results.\";\n            endMessage.classList.add('end-message');  // Додаємо новий клас\n            endMessage.style.textAlign = 'center'; // Вирівнюємо текст по центру\n            galleryContainer.appendChild(endMessage); // Додаємо повідомлення до галереї\n        }\n\n        // Отримуємо висоту першої картки галереї\n        const galleryItem = document.querySelector('.gallery-item');\n        if (galleryItem) {\n            const { height } = galleryItem.getBoundingClientRect();\n            window.scrollBy({\n                top: height * 2, // Прокрутка на дві висоти картки\n                behavior: 'smooth' // Плавна прокрутка\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to load more images.',\n        });\n        console.error('Error:', error);\n    } finally {\n        hideLoader();\n    }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","response","axios","renderImages","images","container","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","searchForm","galleryContainer","loadMoreBtn","currentPage","currentQuery","lightbox","SimpleLightbox","event","iziToast","totalHits","totalPages","endMessage","error","galleryItem","height"],"mappings":"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"}